/*
 * jQuery multiselect plugin
 *
 * Copyright (c) 2009 Jeremy Stephens
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(d){function c(f,e){return(f==e?0:(f<e?-1:1))}function a(f,e){objects=d("option",f);if(d.isArray(e)){sorted=objects.sort(function(i,g){return c(e.indexOf(i.innerHTML),e.indexOf(g.innerHTML))})}else{sorted=objects.sort(function(i,g){return c(i.innerHTML,g.innerHTML)})}f.html(sorted)}function b(f,e){e.append(f.children("option:selected").remove())}d.fn.multiselect=function(e){var f=d.extend({sort:true,autoSize:false},e);this.each(function(k){var j=d(this);var o=j.find("select");if(o.length<2){return}o.attr("multiple",true);var n=j.find("input:button");if(n.length<2){return}var g=o.eq(0);var r=o.eq(1);var m=n.eq(0);var p=n.eq(1);var q=function(){b(g,r);if(f.sort){a(r,f.sort)}};m.click(q);g.dblclick(q);var l=function(){b(r,g);if(f.sort){a(g,f.sort)}};p.click(l);r.dblclick(l);if(f.sort){a(g,f.sort);a(r,f.sort)}if(f.autoSize){w=((x=g.width())>(y=r.width())?x:y);h=((x=g.height())>(y=r.height())?x:y);o.width(w+10);o.height(h+10)}j.parent("form").submit(function(){d("option",r).attr("selected",true)})})}})(jQuery);
